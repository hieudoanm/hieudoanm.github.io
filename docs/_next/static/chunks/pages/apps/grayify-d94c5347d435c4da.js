(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4820],{51609:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/grayify",function(){return t(14693)}])},14693:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});var l=t(50612);let n={src:"/nothing/_next/static/media/film.d64a9c6f.jpg"};var r=t(53440),i=t.n(r),o=t(94344);let s=()=>{let e=(0,o.useRef)(null),[{base64:a=n.src,aspectRatio:r="3 / 2",loading:s=!1},c]=(0,o.useState)({base64:n.src,aspectRatio:"3 / 2",loading:!1});return(0,l.jsx)("div",{className:"container mx-auto p-8",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,l.jsxs)("label",{htmlFor:"upload-image",className:"cursor-pointer border border-dotted px-4 py-2 text-center",children:[(0,l.jsx)("input",{type:"file",name:"image",accept:"image/*",id:"upload-image",className:"hidden",onChange:e=>{let a=e.target.files;if(null===a)return;let l=a[0],r=new FileReader;r.readAsDataURL(l),r.onload=()=>{var e,a;let l=null!==(a=null===(e=r.result)||void 0===e?void 0:e.toString())&&void 0!==a?a:"",i=new Image;i.src=l,i.onload=async()=>{let{grayscale:e,open_image:a}=await t.e(631).then(t.bind(t,40631)),r=document.createElement("canvas");r.width=i.width,r.height=i.height;let o=r.getContext("2d");if(null===o)return;o.drawImage(i,0,0);let s=a(r,o);e(s);let d=s.get_base64();console.info("Grayscale Base64:",d),c(e=>{var a;return{...e,base64:null!==(a=null!=d?d:l)&&void 0!==a?a:n.src}})}},r.onerror=e=>{console.error("Error converting file to Base64:",e)}}}),(0,l.jsx)("span",{children:"Upload File"})]}),(0,l.jsx)("button",{className:"w-full",style:{aspectRatio:r},onClick:()=>{c(e=>({...e,aspectRatio:"3 / 2"===e.aspectRatio?"2 / 3":"3 / 2"}))},children:(0,l.jsx)("div",{ref:e,className:"h-full w-full",children:(0,l.jsx)("div",{className:"h-full w-full bg-cover bg-center",style:{backgroundImage:"url(".concat(a,")")}})})}),(0,l.jsx)("button",{type:"button",className:"w-full cursor-pointer bg-gray-900 px-4 py-2 text-gray-100",disabled:s,onClick:async()=>{if(e.current){console.info("Loading"),c(e=>({...e,loading:!0})),await new Promise(e=>requestAnimationFrame(e));let a=(await i()(e.current,{scale:10,allowTaint:!0,width:e.current.offsetWidth,height:e.current.offsetHeight})).toDataURL("image/jpeg"),t=document.createElement("a");t.href=a,t.download="image.jpg",t.click(),t.remove(),c(e=>({...e,loading:!1}))}},children:s?"Downloading":"Download"})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[4310,636,6593,8792],()=>a(51609)),_N_E=e.O()}]);