(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7620],{2709:(e,t,s)=>{"use strict";function i(e,t){return"function"==typeof e?e(...t):!!e}function n(){}s.d(t,{G:()=>i,l:()=>n})},20726:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var i=s(13501),n=s(71457),r=s(17765),o=s(10734),a=s(98107),c=s(98571),l=class extends a.Q{#e;#t=void 0;#s;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,c.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,c.EN)(t.mutationKey)!==(0,c.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#r()}mutate(e,t){return this.#i=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#n(){let e=this.#s?.state??(0,r.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){o.j.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#i.onSuccess?.(e.data,t,s),this.#i.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#i.onError?.(e.error,t,s),this.#i.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},u=s(2178),d=s(2709);function h(e,t){let s=(0,u.jE)(t),[i]=n.useState(()=>new l(s,e));n.useEffect(()=>{i.setOptions(e)},[i,e]);let r=n.useSyncExternalStore(n.useCallback(e=>i.subscribe(o.j.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=n.useCallback((e,t)=>{i.mutate(e,t).catch(d.l)},[i]);if(r.error&&(0,d.G)(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:a,mutateAsync:r.mutate}}let p=()=>{let[{token:e,webhook:t,result:s},r]=(0,n.useState)({token:"",webhook:"",result:{}}),o=h({mutationFn:()=>fetch("https://api.telegram.org/bot".concat(e,"/setWebhook"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({url:t})}).then(e=>e.json()),onSuccess:async t=>{if(t.ok){let s=await fetch("https://api.telegram.org/bot".concat(e,"/getWebhookInfo")).then(e=>e.json());s.ok&&r(e=>({...e,result:{...e.result,...s.result,description:t.description}}))}else console.error(t)}}),a=h({mutationFn:()=>fetch("https://api.telegram.org/bot".concat(e,"/deleteWebhook"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({url:t})}).then(e=>e.json()),onSuccess:async e=>{e.ok&&r(t=>({...t,result:{has_custom_certificate:!1,ip_address:"",max_connections:0,pending_update_count:0,url:"",description:e.description}}))}});return(0,i.jsx)("div",{className:"h-screen w-screen",children:(0,i.jsx)("div",{className:"container mx-auto h-full p-8",children:(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsxs)("div",{className:"flex w-full max-w-lg flex-col gap-y-4 rounded border border-gray-300 p-4 shadow",children:[(0,i.jsx)("h1",{className:"text-center text-xl",children:"Telegram Webhook"}),(0,i.jsxs)("form",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",onSubmit:e=>{e.preventDefault(),o.mutate()},children:[(0,i.jsx)("div",{className:"col-span-1 md:col-span-2",children:(0,i.jsx)("input",{id:"token",name:"token",placeholder:"Token",className:"w-full rounded border border-gray-300 px-2 py-1",value:e,onChange:e=>{r(t=>({...t,token:e.target.value}))},required:!0})}),(0,i.jsx)("div",{className:"col-span-1",children:(0,i.jsx)("input",{id:"webhook",name:"webhook",placeholder:"Webhook",className:"w-full rounded border border-gray-300 px-2 py-1",value:t,onChange:e=>{r(t=>({...t,webhook:e.target.value}))},required:!0})}),(0,i.jsx)("div",{className:"col-span-1",children:(0,i.jsx)("button",{type:"submit",className:"w-full rounded bg-gray-900 px-2 py-1 text-gray-100",disabled:o.isPending,children:o.isPending?"Setting Webhook":"Set Webhook"})}),(0,i.jsx)("div",{className:"col-span-1 md:col-span-2",children:(0,i.jsx)("button",{type:"button",className:"w-full rounded bg-gray-900 px-2 py-1 text-gray-100",disabled:a.isPending,onClick:()=>{a.mutate()},children:a.isPending?"Deleting Webhook":"Delete Webhook"})})]}),(0,i.jsxs)("div",{children:[o.isError&&(0,i.jsxs)("div",{className:"text-center",children:["Error: ",o.error.message]}),"{}"!==JSON.stringify(s)?(0,i.jsxs)("div",{className:"rounded border border-gray-300 p-4",children:[!!s.description&&(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{children:"Description:"}),(0,i.jsx)("p",{children:s.description})]}),s.has_custom_certificate&&(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{children:"Has Custom Certificate:"}),(0,i.jsx)("p",{children:s.has_custom_certificate})]}),s.ip_address&&(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{children:"IP Address:"}),(0,i.jsx)("p",{children:s.ip_address})]}),!!s.max_connections&&(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{children:"Max Connections:"}),(0,i.jsx)("p",{children:s.max_connections})]}),!!s.pending_update_count&&(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{children:"Pending Update Count"}),(0,i.jsx)("p",{children:s.pending_update_count})]}),!!s.url&&(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{children:"URL:"}),(0,i.jsx)("p",{children:s.url})]})]}):(0,i.jsx)("div",{className:"rounded border border-gray-300 p-4",children:(0,i.jsx)("p",{className:"text-center",children:"No Result"})})]})]})})})})}},62436:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/telegram/webhook",function(){return s(20726)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(62436)),_N_E=e.O()}]);