(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7709],{31:(e,t,l)=>{"use strict";l.d(t,{V:()=>n});var r=l(27127),s=l(28976),a=l(46567);let n=e=>{let{id:t="",position:l="",arePiecesDraggable:n=!1,onPieceDrop:c=(e,t,l)=>(console.info("sourceSquare",e),console.info("targetSquare",t),console.info("piece",l),!1)}=e;return(0,r.jsx)(a.Ve,{id:t,position:l,arePiecesDraggable:n,onPieceDrop:c,customDarkSquareStyle:{backgroundColor:"oklch(12.9% 0.042 264.695)",text:"white"},customLightSquareStyle:{backgroundColor:"oklch(20.8% 0.042 265.755)",text:"white"},customPieces:{wK:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.boH,{className:"text-xl text-white md:text-2xl"})}),wQ:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.gq4,{className:"text-xl text-white md:text-2xl"})}),wR:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.$lv,{className:"text-xl text-white md:text-2xl"})}),wB:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.ZKN,{className:"text-xl text-white md:text-2xl"})}),wN:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.zrC,{className:"text-xl text-white md:text-2xl"})}),wP:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.UYB,{className:"text-xl text-white md:text-2xl"})}),bK:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.boH,{className:"text-xl text-red-500 md:text-2xl"})}),bQ:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.gq4,{className:"text-xl text-red-500 md:text-2xl"})}),bR:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.$lv,{className:"text-xl text-red-500 md:text-2xl"})}),bB:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.ZKN,{className:"text-xl text-red-500 md:text-2xl"})}),bN:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.zrC,{className:"text-xl text-red-500 md:text-2xl"})}),bP:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(s.UYB,{className:"text-xl text-red-500 md:text-2xl"})})}})}},7662:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/chess/converter/fen2png",function(){return l(25643)}])},25643:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>u});var r=l(27127);let s=async e=>{let{fen:t,multiPv:l=1,variant:r="standard"}=e,s=new URLSearchParams;s.set("fen",t),s.set("multiPv",l.toString()),s.set("variant",r);let a="https://lichess.org/api/cloud-eval?".concat(s.toString()),n=await fetch(a);return await n.json()};var a=l(31),n=l(19533),c=l(35018),i=l(60776),o=l.n(i),x=l(64391);let d=e=>{let{mate:t=0,pawn:l=0}=e;return 0===t?{percentage:50-l,display:l}:t>0?{percentage:0,display:"M".concat(t)}:{percentage:100,display:"M".concat(t)}},u=()=>{var e,t,l,i,u,m,f;let h=(0,x.useRef)(null),w="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",[{fen:p=w,game:j=new c.d$(w),loading:g=!1},N]=(0,x.useState)({fen:w,game:new c.d$(w),loading:!1}),{error:y,data:v}=(0,n.I)({queryKey:["get-cloud-evaluation-".concat(p)],queryFn:async()=>{let e=await s({fen:p});return console.log("cloudEvaluation",e),e}});y&&console.error("queryError",y);let b=(null!=(u=null==v||null==(t=v.pvs)||null==(e=t.at(0))?void 0:e.cp)?u:0)/100,P=null!=(m=null==v||null==(i=v.pvs)||null==(l=i.at(0))?void 0:l.mate)?m:0;console.info("pawn and mate and error",{pawn:b,mate:P,error:null!=(f=null==v?void 0:v.error)?f:""});let k=e=>{let t=j.move(e);return null!==e&&N(e=>({...e,game:j,fen:j.fen()})),t};return(0,r.jsx)("div",{className:"min-h-screen",children:(0,r.jsx)("div",{className:"container mx-auto px-8",children:(0,r.jsxs)("div",{className:"mx-auto flex h-full max-w-md flex-col items-center justify-center gap-y-4 py-4 md:gap-y-8 md:py-8",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-4xl",children:"FEN to PNG"}),(0,r.jsx)("div",{className:"w-full rounded",children:(0,r.jsx)("input",{id:"fen",name:"fen",className:"w-full rounded border border-gray-700 p-2 text-red-500 focus:outline-none",placeholder:w,value:p,onChange:e=>N(t=>({...t,fen:e.target.value}))})}),(0,r.jsxs)("div",{className:"relative aspect-square w-full",children:[(0,r.jsx)("div",{ref:h,className:"h-full w-full overflow-hidden rounded border border-gray-700",children:(0,r.jsx)(a.V,{id:"board",position:p,arePiecesDraggable:!0,onPieceDrop:(e,t)=>null!==k({from:e,to:t,promotion:"q"})})}),j.isCheckmate()?(0,r.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 flex h-full w-full items-center justify-center",children:(0,r.jsx)("div",{className:"rounded border border-gray-700 bg-gray-900 px-4 py-2 text-gray-100",children:"Checkmate"})}):(0,r.jsx)("div",{className:"absolute top-0 -right-12 h-full w-8 overflow-hidden rounded border border-gray-700",children:(0,r.jsx)("div",{className:"w-full bg-gray-900 text-center text-[8px] text-gray-100 transition-all ".concat(0===d({pawn:b,mate:P}).percentage?"text-gray-900":"text-gray-100"),style:{height:"".concat(d({pawn:b,mate:P}).percentage,"%")},children:d({pawn:b,mate:P}).display})})]}),(0,r.jsx)("button",{type:"button",className:"w-full cursor-pointer rounded bg-red-500 px-4 py-2 font-semibold text-gray-100",disabled:g,onClick:async()=>{try{if(N(e=>({...e,loading:!0})),h.current){await new Promise(e=>requestAnimationFrame(e));let e=(await o()(h.current)).toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="".concat(p,".png"),t.click(),t.remove(),N(e=>({...e,loading:!1}))}}catch(e){console.error("error",e),alert(e.message)}finally{N(e=>({...e,loading:!1}))}},children:g?"Downloading":"Download"})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5082,436,7807,83,9533,636,6593,8792],()=>t(7662)),_N_E=e.O()}]);