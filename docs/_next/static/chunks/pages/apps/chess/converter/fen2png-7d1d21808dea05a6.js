(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7709],{25958:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/chess/converter/fen2png",function(){return l(29452)}])},29452:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>u});var s=l(27127);let a=async e=>{let{fen:t,multiPv:l=1,variant:s="standard"}=e,a=new URLSearchParams;a.set("fen",t),a.set("multiPv",l.toString()),a.set("variant",s);let r="https://lichess.org/api/cloud-eval?".concat(a.toString()),n=await fetch(r);return await n.json()};var r=l(80420),n=l(29041),c=l(90917),i=l(60776),d=l.n(i),o=l(64391);let x=e=>{let{mate:t=0,pawn:l=0}=e;return 0===t?{percentage:50-l,display:l}:t>0?{percentage:0,display:"M".concat(t)}:{percentage:100,display:"M".concat(t)}},u=()=>{var e,t,l,i,u,m,f;let h=(0,o.useRef)(null),v="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",[{fen:w=v,game:p=new c.d$(v),loading:g=!1},j]=(0,o.useState)({fen:v,game:new c.d$(v),loading:!1}),{error:N,data:y}=(0,n.I)({queryKey:["get-cloud-evaluation-".concat(w)],queryFn:async()=>{let e=await a({fen:w});return console.log("cloudEvaluation",e),e}});N&&console.error("queryError",N);let b=(null!==(u=null==y?void 0:null===(t=y.pvs)||void 0===t?void 0:null===(e=t.at(0))||void 0===e?void 0:e.cp)&&void 0!==u?u:0)/100,P=null!==(m=null==y?void 0:null===(i=y.pvs)||void 0===i?void 0:null===(l=i.at(0))||void 0===l?void 0:l.mate)&&void 0!==m?m:0;console.info("pawn and mate and error",{pawn:b,mate:P,error:null!==(f=null==y?void 0:y.error)&&void 0!==f?f:""});let k=e=>{let t=p.move(e);return null!==e&&j(e=>({...e,game:p,fen:p.fen()})),t};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 text-gray-900",children:(0,s.jsx)("div",{className:"container mx-auto px-8",children:(0,s.jsxs)("div",{className:"mx-auto flex h-full max-w-md flex-col items-center justify-center gap-y-4 py-4 md:gap-y-8 md:py-8",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-4xl",children:"FEN to PNG"}),(0,s.jsx)("div",{className:"w-full rounded bg-gray-900 p-4 text-red-500",children:(0,s.jsx)("input",{id:"fen",name:"fen",className:"w-full",placeholder:v,value:w,onChange:e=>j(t=>({...t,fen:e.target.value}))})}),(0,s.jsxs)("div",{className:"relative aspect-square w-full",children:[(0,s.jsx)("div",{ref:h,className:"h-full w-full overflow-hidden rounded",children:(0,s.jsx)(r.V,{id:"board",position:w,arePiecesDraggable:!0,onPieceDrop:(e,t)=>null!==k({from:e,to:t,promotion:"q"})})}),p.isCheckmate()?(0,s.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 flex h-full w-full items-center justify-center",children:(0,s.jsx)("div",{className:"rounded border border-gray-700 bg-gray-900 px-4 py-2 text-gray-100",children:"Checkmate"})}):(0,s.jsx)("div",{className:"absolute top-0 -right-12 h-full w-8 overflow-hidden rounded border border-gray-900",children:(0,s.jsx)("div",{className:"w-full bg-gray-900 text-center text-[8px] text-gray-100 transition-all ".concat(0===x({pawn:b,mate:P}).percentage?"text-gray-900":"text-gray-100"),style:{height:"".concat(x({pawn:b,mate:P}).percentage,"%")},children:x({pawn:b,mate:P}).display})})]}),(0,s.jsx)("button",{type:"button",className:"w-full cursor-pointer rounded bg-gray-900 px-4 py-2 text-red-500",disabled:g,onClick:async()=>{try{if(j(e=>({...e,loading:!0})),h.current){await new Promise(e=>requestAnimationFrame(e));let e=(await d()(h.current)).toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="".concat(w,".png"),t.click(),t.remove(),j(e=>({...e,loading:!1}))}}catch(e){console.error("error",e),alert(e.message)}finally{j(e=>({...e,loading:!1}))}},children:g?"Downloading":"Download"})]})})})}},80420:(e,t,l)=>{"use strict";l.d(t,{V:()=>n});var s=l(27127),a=l(28976),r=l(88727);let n=e=>{let{id:t="",position:l="",arePiecesDraggable:n=!1,onPieceDrop:c=(e,t,l)=>(console.info("sourceSquare",e),console.info("targetSquare",t),console.info("piece",l),!1)}=e;return(0,s.jsx)(r.Ve,{id:t,position:l,arePiecesDraggable:n,onPieceDrop:c,customDarkSquareStyle:{backgroundColor:"oklch(21% 0.034 264.665 / 100%)",text:"white"},customLightSquareStyle:{backgroundColor:"oklch(21% 0.034 264.665 / 95%)",text:"white"},customPieces:{wK:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.boH,{className:"text-2xl text-white md:text-4xl"})}),wQ:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.gq4,{className:"text-2xl text-white md:text-4xl"})}),wR:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.$lv,{className:"text-2xl text-white md:text-4xl"})}),wB:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.ZKN,{className:"text-2xl text-white md:text-4xl"})}),wN:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.zrC,{className:"text-2xl text-white md:text-4xl"})}),wP:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.UYB,{className:"text-2xl text-white md:text-4xl"})}),bK:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.boH,{className:"text-2xl text-red-500 md:text-4xl"})}),bQ:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.gq4,{className:"text-2xl text-red-500 md:text-4xl"})}),bR:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.$lv,{className:"text-2xl text-red-500 md:text-4xl"})}),bB:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.ZKN,{className:"text-2xl text-red-500 md:text-4xl"})}),bN:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.zrC,{className:"text-2xl text-red-500 md:text-4xl"})}),bP:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(a.UYB,{className:"text-2xl text-red-500 md:text-4xl"})})}})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5082,436,3451,9041,6114,636,6593,8792],()=>t(25958)),_N_E=e.O()}]);