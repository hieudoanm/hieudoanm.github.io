(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4958],{26754:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});var s=n(16126);let r=e=>{let t=new s.d$;return t.loadPgn(e),t.history()}},42958:e=>{e.exports=(function e(t,n,s){function r(a,o){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var l=Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(e){return r(t[a][1][e]||e)},h,h.exports,e,t,n,s)}return n[a].exports}for(var i=void 0,a=0;a<s.length;a++)r(s[a]);return r})({1:[function(e,t,n){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,n,s,a,o,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var h=Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(void 0===(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(o=0,a=Array.prototype.slice.call(arguments,1),s=(l=n.slice()).length;o<s;o++)l[o].apply(this,a);return!0},s.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(n=void 0===this._maxListeners?s.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function s(){this.removeListener(e,s),n||(n=!0,t.apply(this,arguments))}return s.listener=t,this.on(e,s),this},s.prototype.removeListener=function(e,t){var n,s,a,o;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,s=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(o=a;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){s=o;break}if(s<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0==arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0==arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){var t;return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},s.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){var s,r,i,a,o;o=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),i="ie"===(s=o.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(r={name:"version"===s[1]?s[3]:s[1],version:i||parseFloat("opera"===s[1]&&s[4]?s[4]:s[2]),platform:{name:o.match(/ip(?:ad|od|hone)/)?"ios":(o.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}})[r.name]=!0,r[r.name+parseInt(r.version,10)]=!0,r.platform[r.platform.name]=!0,t.exports=r},{}],3:[function(e,t,n){var s,r,i=function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},a={}.hasOwnProperty,o=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return -1},l=[].slice;s=e("events").EventEmitter,r=e("./browser.coffee"),t.exports=function(e){var t,n;function s(e){var n,s,r;for(s in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e),t)r=t[s],null==(n=this.options)[s]&&(n[s]=r)}return i(s,e),t={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},n={delay:500,copy:!1},s.prototype.setOption=function(e,t){if(this.options[e]=t,null!=this._canvas&&("width"===e||"height"===e))return this._canvas[e]=t},s.prototype.setOptions=function(e){var t,n,s;for(t in n=[],e)a.call(e,t)&&(s=e[t],n.push(this.setOption(t,s)));return n},s.prototype.addFrame=function(e,t){var s,r;for(r in null==t&&(t={}),(s={}).transparent=this.options.transparent,n)s[r]=t[r]||n[r];if(null==this.options.width&&this.setOption("width",e.width),null==this.options.height&&this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!==ImageData&&e instanceof ImageData)s.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?s.data=this.getContextData(e):s.context=e;else if(null!=e.childNodes)t.copy?s.data=this.getImageData(e):s.image=e;else throw Error("Invalid image");return this.frames.push(s)},s.prototype.render=function(){var e,t;if(this.running)throw Error("Already running");if(null==this.options.width||null==this.options.height)throw Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var e,t,n;for(n=[],e=0,t=this.frames.length;0<=t?e<t:e>t;0<=t?++e:--e)n.push(null);return n}).call(this),t=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=0;0<=t?e<t:e>t;0<=t?++e:--e)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},s.prototype.abort=function(){for(var e;null!=(e=this.activeWorkers.shift());)this.log("killing active worker"),e.terminate();return this.running=!1,this.emit("abort")},s.prototype.spawnWorkers=function(){var e,t,n,s;return e=Math.min(this.options.workers,this.frames.length),(function(){n=[];for(var s=t=this.freeWorkers.length;t<=e?s<e:s>e;t<=e?s++:s--)n.push(s);return n}).apply(this).forEach((s=this,function(e){var t;return s.log("spawning worker "+e),(t=new Worker(s.options.workerScript)).onmessage=function(e){return s.activeWorkers.splice(s.activeWorkers.indexOf(t),1),s.freeWorkers.push(t),s.frameFinished(e.data)},s.freeWorkers.push(t)})),e},s.prototype.frameFinished=function(e){var t,n;if(this.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,!0===this.options.globalPalette&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(t=1,n=this.freeWorkers.length;1<=n?t<n:t>n;1<=n?++t:--t)this.renderNextFrame();return o.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},s.prototype.finishRendering=function(){var e,t,n,s,r,i,a,o,l,h,c,d,f,u,p,x;for(r=0,o=0,l=(u=this.imageParts).length;r<l;r++)o+=((t=u[r]).data.length-1)*t.pageSize+t.cursor;for(o+=t.pageSize-t.cursor,this.log("rendering finished - filesize "+Math.round(o/1e3)+"kb"),e=new Uint8Array(o),d=0,i=0,h=(p=this.imageParts).length;i<h;i++)for(x=(t=p[i]).data,n=a=0,c=x.length;a<c;n=++a)f=x[n],e.set(f,d),n===t.data.length-1?d+=t.cursor:d+=t.pageSize;return s=new Blob([e],{type:"image/gif"}),this.emit("finished",s,e)},s.prototype.renderNextFrame=function(){var e,t,n;if(0===this.freeWorkers.length)throw Error("No free workers");if(!(this.nextFrame>=this.frames.length))return e=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),t=this.getTask(e),this.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(t)},s.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},s.prototype.getImageData=function(e){var t;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(t=this._canvas.getContext("2d")).setFill=this.options.background,t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),this.getContextData(t)},s.prototype.getTask=function(e){var t,n;if(n={index:t=this.frames.indexOf(e),last:t===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===r.name},null!=e.data)n.data=e.data;else if(null!=e.context)n.data=this.getContextData(e.context);else if(null!=e.image)n.data=this.getImageData(e.image);else throw Error("Invalid frame");return n},s.prototype.log=function(){var e;if(e=1<=arguments.length?l.call(arguments,0):[],this.options.debug)return console.log.apply(console,e)},s}(s)},{"./browser.coffee":2,events:1}]},{},[3])(3)},66058:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var s=n(13501),r=n(77213),i=n(26754),a=n(16126),o=n(42958),l=n.n(o),h=n(67331),c=n.n(h),d=n(71457);let f='[Event "Norway Chess 2017"]\n[Site "Stavanger"]\n[Date "2017.06.08"]\n[Round "3.1"]\n[White "Carlsen, Magnus"]\n[Black "Nakamura, Hikaru"]\n[Result "1/2-1/2"]\n[ECO "B90"]\n[WhiteElo "2832"]\n[BlackElo "2785"]\n[PlyCount "80"]\n[EventDate "2017.??.??"]\n[Whiteclock "0:50:59"]\n[Blackclock "0:09:35"]\n[Link "https://www.chess.com/news/view/norway-carlsen-nakamura-clash-ends-in-draw-1116"]\n\n1. e4 c5 2. Nf3 ({Last year in Bilbao Carlsen used the move order} 2. Ne2 d6 3.\nNbc3 a6 4. g3 g6 5. Bg2 Bg7 6. d4 cxd4 7. Nxd4 {and eventually Nakaura would win\nhis first ever classical game against him.}) 2... d6 3. d4 cxd4 4. Nxd4 Nf6 5.\nNc3 a6 6. h3 g6 7. g3 {Nakamura expected this.} 7... Nc6 8. Be3 Bg7 9. Bg2 O-O\n10. O-O Nd7 11. b3 {Carlsen said he was "ashamed" of this move as he "didn\'t\ngrasp Hikaru\'s idea at all."} 11... Nxd4 12. Bxd4 Bxd4 13. Qxd4 b6 14. Nd5 Bb7\n15. c4 e5 16. Qe3 (16. Qd2) 16... b5 ({Also possible was} 16... Bxd5 17. cxd5 a5\n18. Rac1 Nc5 19. a3 a4 20. b4 Nb3 21. Rc6 Nd4 22. Rfc1 {and now} 22... b5 {is\nsafer than taking the exchange.}) 17. Rac1 bxc4 18. Rxc4 Bxd5 19. exd5 a5 20.\nRfc1 Nc5 {is the same.} 21. a3 f5 {"What he did was insanely risky."\n(Carlsen)} ({The world champ expected} 21... a4) 22. b4 axb4 23. axb4 Nd7 (23...\nf4 {doesn\'t work because of} 24. gxf4 exf4 25. Qf3) 24. Rc6 {"Perhaps not such\na good practical choice," said Carlsen.} ({He regretted that he didn\'t play}\n24. b5 {with the idea} 24... Nc5 25. Rxc5 dxc5 26. Qxe5 Re8 27. Qf4) 24... f4\n25. gxf4 exf4 26. Qe6+ Rf7 27. Qxd6 ({Carlsen "didn\'t see anything better" but\nNakamura was a bit concerned about} 27. Rc7 {and rightly so. The engine says}\n27... Ra1 $1 {is the only move for an equal position} ({although} 27... f3 28.\nBxf3 Qg5+ 29. Bg2 Qf4 {doesn\'t look bad either.})) 27... Qg5 28. Kh1 $6 {Carlsen\nsaid he started to miss things here.} ({A slightly better try was} 28. Rc8+ Rxc8\n29. Rxc8+ Kg7 {and only then} 30. Kh1 (30. h4 Qg4 $1 (30... Qxh4 31. Rc7))) 28...\nf3 29. Bf1 Nf6 {Here Nakamura started to get "really optimistic."} 30. Qe6 Kg7\n{Carlsen "completely missed" this move.} ({He was fixated at} 30... Re8 31.\nRc8 Kg7 32. Rxe8 Qxc1 33. Qe1 Qxe1 34. Rxe1) 31. Rc7 $6 ({Here a better try was}\n31. d6 Re8 32. Qb3 {and now Black\'s best try is probably} (32. Qc4 Re4 33. Qc2\nRg4 $1 34. Rc5 $1 Rg1+ 35. Kh2 Rg2+ 36. Kh1 {is a draw}) 32... Re2 {with a mess.})\n31... Rxc7 32. Rxc7+ Kh6 33. Qe1 Ra2 34. Re7 Ng4 {Forcing the draw.} ({After the\ngame Carlsen asked Nakamura why he didn\'t play} 34... Nxd5 {but the American\nplayer didn\'t see much of an advantage after} 35. Re5 Qd2 36. Qxd2+ Rxd2 37. b5)\n35. hxg4 Qh4+ 36. Kg1 Qxg4+ 37. Kh1 Qh4+ 38. Kg1 Qg4+ 39. Kh1 Qh4+ 40. Kg1 Qg4+\n1/2-1/2',u=e=>{let t=new(l())({workers:1,quality:10,workerScript:"/nothing/workers/gif.worker.js"}),n=0;e.forEach(s=>{let r=new Image;r.src=s,r.onload=()=>{t.addFrame(r,{delay:500}),++n===e.length&&t.render()}}),t.on("finished",e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="pgn.gif",n.click(),n.remove()})},p=()=>{let[{pgn:e=f,loading:t=!1},n]=(0,d.useState)({pgn:f,loading:!1}),[o,l]=(0,d.useState)(new a.d$),h=(0,d.useRef)(null);return(0,s.jsx)("div",{className:"container mx-auto px-8",children:(0,s.jsxs)("div",{className:"mx-auto flex h-full max-w-md flex-col items-center justify-center gap-y-4 py-4 md:gap-y-8 md:py-8",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-4xl",children:"PGN to GIF"}),(0,s.jsx)("div",{className:"w-full rounded bg-gray-900 p-4 text-red-500",children:(0,s.jsx)("textarea",{id:"pgn",name:"pgn",className:"w-full",rows:4,placeholder:f,value:e,onChange:e=>n(t=>({...t,pgn:e.target.value}))})}),(0,s.jsx)("div",{ref:h,className:"aspect-square w-full overflow-hidden rounded",children:(0,s.jsx)(r.V,{id:"board",position:o.fen()})}),(0,s.jsx)("button",{type:"button",className:"w-full cursor-pointer rounded bg-gray-900 px-4 py-2 text-red-500",onClick:async()=>{let t=(0,i.g)(e);l(new a.d$);let n=[];for(let e of t)if(l(t=>{console.log(t.fen());let n=new a.d$(t.fen());return n.move(e),new a.d$(n.fen())}),h.current){let e=(await c()(h.current)).toDataURL("image/png");n.push(e)}u(n)},children:t?"Downloading":"Download"})]})})}},77213:(e,t,n)=>{"use strict";n.d(t,{V:()=>a});var s=n(13501),r=n(20650),i=n(55284);let a=e=>{let{id:t="",position:n="",arePiecesDraggable:a=!1,onPieceDrop:o=(e,t,n)=>(console.info("sourceSquare",e),console.info("targetSquare",t),console.info("piece",n),!1)}=e;return(0,s.jsx)(i.Ve,{id:t,position:n,arePiecesDraggable:a,onPieceDrop:o,customDarkSquareStyle:{backgroundColor:"oklch(21% 0.034 264.665 / 100%)",text:"white"},customLightSquareStyle:{backgroundColor:"oklch(21% 0.034 264.665 / 95%)",text:"white"},customPieces:{wK:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.boH,{className:"text-2xl text-white md:text-4xl"})}),wQ:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.gq4,{className:"text-2xl text-white md:text-4xl"})}),wR:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.$lv,{className:"text-2xl text-white md:text-4xl"})}),wB:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.ZKN,{className:"text-2xl text-white md:text-4xl"})}),wN:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.zrC,{className:"text-2xl text-white md:text-4xl"})}),wP:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.UYB,{className:"text-2xl text-white md:text-4xl"})}),bK:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.boH,{className:"text-2xl text-red-500 md:text-4xl"})}),bQ:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.gq4,{className:"text-2xl text-red-500 md:text-4xl"})}),bR:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.$lv,{className:"text-2xl text-red-500 md:text-4xl"})}),bB:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.ZKN,{className:"text-2xl text-red-500 md:text-4xl"})}),bN:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.zrC,{className:"text-2xl text-red-500 md:text-4xl"})}),bP:()=>(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,s.jsx)(r.UYB,{className:"text-2xl text-red-500 md:text-4xl"})})}})}},95197:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/chess/converter/pgn2gif",function(){return n(66058)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[7838,7557,8133,6335,636,6593,8792],()=>t(95197)),_N_E=e.O()}]);